{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{{ user_obj.username }}'s Profile</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f3f3f3;
            display: flex;
            justify-content: center;
            align-items: center;
            padding-top: 40px;
        }
        .card {
            width: 450px;
            background: #fff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .profile-img {
            width: 100px; height: 100px;
            border-radius: 50%;
            overflow: hidden;
            background: #ddd;
        }
        .profile-img img {
            width: 100%; height: 100%;
            object-fit: cover;
        }
        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            border: none;
            font-size: 15px;
        }
        .btn-primary { background: #7b39f2; color: #fff; }
        .btn-gray { background: #ccc; }
        a { text-decoration: none; color: #7b39f2; }
    </style>

</head>
<body>

<div class="card">
    <h2>{{ user_obj.username }}'s Profile</h2>

    <div style="display:flex; gap:20px; align-items:center;">
        <div class="profile-img">
            {% if profile.avatar %}
                <img src="{{ profile.avatar.url }}" alt="Avatar">
            {% else %}
                <img src="{% static 'default-avatar.png' %}">
            {% endif %}
        </div>

        <div>
            <p><strong>Email:</strong> {{ user_obj.email }}</p>
            <p><strong>Bio:</strong> {{ profile.bio|default:"No bio" }}</p>
        </div>
    </div>

    <br>

    <!-- FRIEND BUTTONS -->
    {% if user != user_obj %}
        {% if friend_status == "none" %}
            <a class="btn btn-primary" href="{% url 'users:send_request' username=user_obj.username %}">
                Send Friend Request
            </a>

        {% elif friend_status == "sent" %}
            <button class="btn btn-gray">Request Sent</button>

        {% elif friend_status == "received" %}
            <a class="btn btn-primary" href="{% url 'users:accept_request' id=pending_request_id %}">
                Accept Request
            </a>

        {% elif friend_status == "friends" %}
            <button class="btn btn-gray">Friends</button>
        {% endif %}
    {% endif %}

    <br><br>

    <h3>Your Summary</h3>
    {% if short_analysis %}
        <p>Mood Score: {{ short_analysis.mood }}</p>
        <p>Stress Level: {{ short_analysis.stress }}</p>
        <p>Negative %: {{ short_analysis.negative }}</p>
    {% else %}
        <p>No analysis available.</p>
    {% endif %}

    <br>

    <a href="{% url 'users:edit_profile' %}">Edit Profile</a>
</div>

</body>
</html>
